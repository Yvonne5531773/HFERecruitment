
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.js"></script>
<div class="modal-body">
    <div class="preview_header">
      <h1 title="{{resume.resumename}}的简历">{{resume.resumename}}的简历</h1>
      <a style="padding:2px 15px;margin-left:10px;" ng-click="interview()" class="inline cboxElement" title="通知面试">通知面试</a>
      <a target="_blank" ng-href="/resume/preview/{{resume._id}}" class="inline cboxElement" title="在线下载简历">在线下载简历</a>
    </div>
    <div id="resumeModal" class="preview_content">
      <div id="firstPart">
      <div id="basicInfo" class="profile_box">
        <h2>基本信息</h2>
        <div class="basicShow">
          <span ng-if="resume.name">姓名：{{resume.name}} </span>
          <span ng-if="resume.gender">性别：{{resume.gender}}</span>
          <span ng-if="resume.nation">民族：{{resume.nation}}</span>
          <span ng-if="resume.birthed">出生日期：{{resume.birthed}}</span>
          <span ng-if="resume.politic">政治面貌：{{resume.politic}}</span>
          <span ng-if="resume.firstdegree">第一学历：{{resume.firstdegree}}</span>
          <span ng-if="resume.highdegree">最高学历：{{resume.highdegree}}</span>
          <span ng-if="resume.currentsalary">目前年薪：{{resume.currentsalary}}</span>
          <span ng-if="resume.expectsalary">最高年薪：{{resume.expectsalary}}</span>
          <span ng-if="resume.weight">体重：{{resume.weight}}cm</span>
          <span ng-if="resume.height">身高：{{resume.height}}kg</span>
          <span ng-if="resume.married">婚姻状况：{{resume.married}}</span>
          <span ng-if="resume.child">子女状况：{{resume.child}}</span>
          <span ng-if="resume.phone">手机：{{resume.phone}}</span>
          <span ng-if="resume.email">邮箱：{{resume.email}}</span>
          <span ng-if="resume.health">身体状况：{{resume.health}}</span>
          <span ng-if="resume.idCard">身份证：{{resume.idCard}}</span>
          <span ng-if="resume.experience==='应届毕业生'">工作经验：{{resume.experience}}</span>
          <span ng-if="resume.experience!=='应届毕业生'">工作经验：{{resume.experience}}</span>
          <span ng-if="resume.address">通讯地址：{{resume.address}}</span>
          <span ng-if="resume.workunit">最近工作单位：{{resume.workunit}}</span>
          <span ng-if="resume.post">最近工作职务：{{resume.post}}</span>
          <span ng-if="resume.origin">籍贯：{{resume.origin}}</span>
          <span ng-if="resume.domicile">现户籍地：{{resume.domicile}}</span>
          <span ng-if="resume.status">目前状态：{{resume.status}}</span>
          <span ng-if="resume.honor">最高荣誉：{{resume.honor}}</span>
          <div class="m_portrait">
            <img ng-src="{{resume.icon}}" height="120" width="120">
          </div>
        </div>
      </div>

      <div id="educationalBackground" class="profile_box">
        <h2>教育背景</h2>
        <div class="educationalShow">
          <ul class="elist clearfix">
            <li ng-repeat="vo in resume.education">
              <span class="c9">{{vo.began}} - {{vo.ended}}</span>
              <div>
                <h3>{{vo.school}}</h3>
                <h4>{{vo.profession}}，{{vo.degree}}, {{vo.nature}}</h4>
              </div>
            </li>
          </ul>
        </div>
      </div>

      <div id="workExperience" class="profile_box" ng-show="resume.work.length>0">
        <h2>工作经历</h2>
        <div class="experienceShow">
          <ul class="wlist clearfix" style="padding:0px 0px 0px 25px">
            <li class="clear" ng-repeat="vo in resume.work">
              <span class="c9">{{vo.yearStart}}.{{vo.monthStart}} - {{vo.yearEnd}}.{{vo.monthEnd}}</span>
              <div>
                <h3>{{vo.company}}</h3>
                <h4>{{vo.position}}</h4>
              </div>
            </li>
          </ul>
        </div>
      </div>

        <div id="projectExperience" class="profile_box" ng-show="resume.project.length>0">
          <h2>项目经验</h2>
          <div class="projectShow">
            <ul class="plist clearfix">
              <li class="noborder" ng-repeat="vo in resume.project">
                <div class="projectList">
                  <div class="f16 mb10">{{vo.name}}，{{vo.position}}
                    <span class="c9">（{{vo.yearStart}}.{{vo.monthStart}} - {{vo.yearEnd}}.{{vo.monthEnd}}）</span>
                    }
                  </div>
                  <div class="dl1">
                    {{vo.description}}
                  </div>
                </div>
              </li>
            </ul>
          </div>
        </div>

        <div id="certificate" class="profile_box" ng-show="resume.certificate.length>0">
          <h2>证书等级</h2>
          <div class="certificateShow">
            <ul class="clist clearfix">
              <li class="clear" ng-repeat="vo in resume.certificate">
                <span class="c9">{{vo.gotYear}}.{{vo.gotMonth}}</span>
                <div>
                  <h3>{{vo.name}}</h3>
                  <h4>{{vo.nature}}</h4>
                </div>
              </li>
            </ul>
          </div>
        </div>

        <div id="prize" class="profile_box" ng-show="resume.prize">
          <h2>奖惩情况</h2>
          <div class="prizeShow">
            <p>{{resume.prize}}</p>
          </div>
        </div>

      <div id="family" class="profile_box" ng-show="resume.family.length>0">
        <h2>家庭成员</h2>
        <div class="familyShow" style="margin-left: 25px;">
          <ul class="flist clearfix" style="padding:0">
            <li style="list-style-type:none;margin:0px;" ng-repeat="family in resume.family">
              <div class="familyList">
                <div class="f16 mb10 fixed_width">
                  {{family.name}}，{{family.company}}，{{family.position}}
                  <span class="c9">（{{family.relation}}）</span>
                </div>
                <div class="dl1">
                  {{family.domicile}}
                </div>
              </div>
            </li>
          </ul>
        </div>
      </div>

        <div id="strength" class="profile_box" ng-show="resume.strength">
          <h2>特长技能</h2>
          <div class="strengthShow">
            <p>{{resume.strength}}</p>
          </div>
        </div>

        <div id="remark" class="profile_box" ng-show="resume.remark">
          <h2>备注</h2>
          <div class="remarkShow">
            <p>{{resume.remark}}</p>
          </div>
        </div>
      </div>

    </div>
</div>
<script>
  $(function(){
      var scope = $('#resumeModal').scope();
      $('#downloadResume').on('click', function(){
          var pdf = new jsPDF('p', 'mm', 'a3');
          var options = {
//              format: 'JPEG',
              background: '#ffffff'
          };
          printbypage(pdf, 0, options);
      })
      function printbypage(pdf, k, options){
          var firstPartPage = $('#firstPart')[0],
              secondPartPage = $('#secondPart')[0],
              filename = scope.resume.name+'简历.pdf';
          console.log('firstPartPage',firstPartPage)
          console.log('secondPartPage',secondPartPage)
//          if(k <= 5) {
//              pdf.output('save', 'resume.pdf');
//          }
          pdf.addHTML(firstPartPage, 20, 5, options, function () {

          });
//          setTimeout(function() {
//              console.log('in printbypage 2')
//              pdf.addHTML(secondPartPage,0,0, {background: '#000000'}, function(){});
//          }, 500);
          setTimeout(function() {
              pdf.output('dataurlnewwindow');
              pdf.output('save', filename);
          }, 600);
      };
  });
</script>